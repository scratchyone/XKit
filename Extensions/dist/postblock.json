{"id":"postblock","script":"//* TITLE PostBlock **//\n//* VERSION 1.0.2 **//\n//* DESCRIPTION Block the posts you don't like **//\n//* DETAILS This extension lets you blocks posts you don't like on your dashboard. When you block a post, it will be hidden completely, including reblogs of it.<br><br>Tip: hold down ALT to skip the blocking confirmation! **//\n//* DEVELOPER new-xkit **//\n//* FRAME false **//\n//* SLOW true **//\n//* BETA false **//\n\nXKit.extensions.postblock = new Object({\n\n\trunning: false,\n\tslow: true,\n\tblacklisted: [],\n\tbutton_icon: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAApUlEQVQoz2NgQAHVR6t3MOADtZbVFkBl/6v/41VW87X6E0xZzerqBTiUQRTAyX/EKftPtLKahuoCvMrwAHTTIBAuXeVe09LAB5Gq0sFUVj0fEhAfgdwFaFKobJDC6rMg71db4FEGUlhTCmLUnMGlDAoaRKq/IYTRlSEpr5lGlLIKlZrfRCgDmjeBKGVlvNV3iVAGTG26Nc+JUAb0sUTNamCaw6EMAJiVMfrH3EFYAAAAAElFTkSuQmCC',\n\n\tprocessing: false,\n\n\trun: function() {\n\t\tthis.running = true;\n\t\tXKit.tools.init_css(\"postblock\");\n\n\t\tthis.blacklisted = XKit.storage.get(\"postblock\", \"posts\", \"\").split(\",\");\n\n\t\tXKit.interface.react.create_control_button(\"xpostblockbutton\", this.button_icon, \"PostBlock\", XKit.extensions.postblock.block).then(() => {\n\t\t\tXKit.post_listener.add(\"postblock\", XKit.extensions.postblock.process_posts);\n\t\t\tXKit.extensions.postblock.process_posts();\n\t\t});\n\t},\n\n\tsave: function() {\n\t\tXKit.storage.set(\"postblock\", \"posts\", this.blacklisted.join(\",\"));\n\t},\n\n\tremove: function(rootID) {\n\t\tconst hide = (id) => XKit.interface.hide(`[data-id='${id}']`, \"postblock\");\n\n\t\thide(rootID);\n\n\t\tXKit.interface.react.get_posts().then($posts => {\n\t\t\t$posts.each(async function() {\n\t\t\t\tvar post_obj = await XKit.interface.react.post($(this));\n\t\t\t\tif (post_obj.root_id == rootID) {\n\t\t\t\t\thide(post_obj.id);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tblock: async function(event) {\n\t\tconst self = XKit.extensions.postblock;\n\n\t\tconst $button = $(this);\n\t\tconst altKey = event.altKey;\n\t\tconst $post = $button.parents(\"[data-id]\");\n\t\tconst post = await XKit.interface.react.post($post);\n\t\tconst postID = post.root_id;\n\n\t\tconst blockPost = () => {\n\t\t\tself.remove(postID);\n\t\t\tself.blacklisted.push(postID);\n\t\t\tself.save();\n\t\t};\n\n\t\tif (altKey) {\n\t\t\tblockPost();\n\t\t} else {\n\t\t\tXKit.window.show(\n\t\t\t\t\"Block this post?\",\n\t\t\t\t\"This post (including reblogs) will be blocked from your dashboard forever, \" +\n\t\t\t\t\"without any indication that it was blocked.\",\n\n\t\t\t\t\"question\",\n\n\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-post-block-ok\">Block Post</div>' +\n\t\t\t\t'<div class=\"xkit-button\" id=\"xkit-close-message\">Cancel</div>'\n\t\t\t);\n\n\t\t\t$(\"#xkit-post-block-ok\").click(() => {\n\t\t\t\tXKit.window.close();\n\t\t\t\tblockPost();\n\t\t\t});\n\t\t}\n\t},\n\n\tprocess_posts: async function() {\n\t\tif (XKit.extensions.postblock.processing === true) {\n\t\t\treturn;\n\t\t}\n\t\tXKit.extensions.postblock.processing = true;\n\n\t\tlet blacklist = XKit.extensions.postblock.blacklisted;\n\n\t\tconst $posts = await XKit.interface.react.get_posts(\"xpostblock-done\");\n\t\t$posts\n\t\t\t.addClass(\"xpostblock-done\")\n\t\t\t.each(async function() {\n\t\t\t\tconst $post = $(this);\n\t\t\t\tconst post = await XKit.interface.react.post($post);\n\n\t\t\t\tif (blacklist.includes(post.root_id)) {\n\t\t\t\t\tXKit.extensions.postblock.remove(post.root_id);\n\t\t\t\t} else {\n\t\t\t\t\tawait XKit.interface.react.add_control_button($post, \"xpostblockbutton\");\n\t\t\t\t}\n\t\t\t});\n\t\tXKit.extensions.postblock.processing = false;\n\t},\n\n\tcpanel: function(m_div) {\n\n\t\t$(m_div).html(\"<div class=\\\"postblock-cp\\\">You have <b id=\\\"xkit-postblock-cp-count\\\">\" + (XKit.extensions.postblock.blacklisted.length - 1) + \"</b> blocked posts.<div style=\\\"padding-top: 5px; padding-bottom: 5px;\\\">\" +\n\t\t\t\t\t\"<div class=\\\"xkit-button\\\" id=\\\"postblock-undo-last\\\">Unblock last blocked post</div></div><small>You need to refresh the page in order for previously blocked posts to appear again.</small></div>\");\n\n\t\tif ((XKit.extensions.postblock.blacklisted.length - 1) === 0) {\n\t\t\t$(\"#postblock-undo-last\").addClass(\"disabled\");\n\t\t}\n\n\t\t$(\"#postblock-undo-last\").click(function() {\n\n\t\t\tif ($(this).hasClass(\"disabled\")) { return; }\n\n\t\t\tXKit.extensions.postblock.blacklisted.pop();\n\t\t\tXKit.storage.set(\"postblock\", \"posts\", XKit.extensions.postblock.blacklisted.join(\",\"));\n\n\t\t\t$(\"#xkit-postblock-cp-count\").html((XKit.extensions.postblock.blacklisted.length - 1));\n\n\t\t\tif ((XKit.extensions.postblock.blacklisted.length - 1) === 0) {\n\t\t\t\t$(\"#postblock-undo-last\").addClass(\"disabled\");\n\t\t\t}\n\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\tXKit.post_listener.remove(\"postblock\");\n\t\tXKit.tools.remove_css(\"postblock\");\n\t\t$(\".xpostblock-done\").removeClass(\"xpostblock-done\");\n\t\t$(\".xpostblockbutton\").remove();\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUJCQjBGRjNFNjU5MTFFMkJEMTFFMTAzOUE3MTJBQkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUJCQjBGRjRFNjU5MTFFMkJEMTFFMTAzOUE3MTJBQkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QkJCMEZGMUU2NTkxMUUyQkQxMUUxMDM5QTcxMkFCRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QkJCMEZGMkU2NTkxMUUyQkQxMUUxMDM5QTcxMkFCRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppl22eQAAAUGSURBVHjajFbPa11VED735vYm1mg3tVJxof4HKkGpVFqk1EURwRbEjSgWRDdCcVMXhWARtD9ArYtSBVGwQqPQCHaha4Vgrba4qTVNGrVIbTaxeXmemXHmmzk37UsIXnjv3XPeOd/MfPOzOjlxhiWxiH6lhI/gIUm6pY9+kf/LhL+Tbek7dvWk3hdbsLDf1U1dVwBoYk+/gWwyFFPXdt2OAkCBxdFNsO4bIJClHOOCg7UdsY80xIFs2jAk4C1BJF6SlA/Qk+qewmh7VFt2dBdAZJboMbVBuPHdoMXQzALcFXZdDSoVvYwvBhsMRkP5FOYLu/12njnrbwOtO3qcCF+Kk6UHTCVyZTmbeIDbGUjDcYKz2LGYQmlSC9yvnfeKLRTeggLsLiLAsV+IN3jLb4XFIs4YdKbGGUrOGlMxO0hl9yOno28fGB4e2fvqvkD3GBKnJCUHRSwsewPcNgnkusjk2hSOdHP614u6uO+B+6cvXYRsRCRLDfVAUCpqkHuIEINAMuENUfEBBEVEMeKQ+f0jB+u6euvwccSL3pdPP/pgXdvufvZF8zaUyc5UGGZKVIg3RiTUIJh9R0psO7qu+v2lXq/HqTzC58/98OPU9yWr9CCFwZnCx2oDke2bBdK4xkRF93AxUiVJKC7UWbAcPcuJy+AbGe/xCQcRnNC4oxzdIxYRhyzjgktcJHGxRL79ZnJkZP3Ylsfdm3aYw5+wLQGGm4ykiVpRwUvuhJKoHiPlRU58fEr/mrv6166n9+ScFxZumK5c0hLM2xIhrYAN2IhSQPBLF3MFNnWSFOql53enm57940c9nJBL+ptRCuFRJFxtepKJzhZfJu6XCz9/fXqit3ijo+jP36/4S5853fqoFl99eVKxsvmWK2WGwmjYoj7QLVROZKrp/cmHx3q9xfn5a3uee8FR3n1nvCNrQICSdv7clMbgzl3PWAVn5GnB00Vd6iWKGhx89+bNunN26ruZy5fSoMK8YscUvvDT2TOTp6IYeiypttl811AirzfGD/w79shjM9O/6ZHJic8G0GiFBRrxh987off/WVi8Pj/PHkgmJ6Ky8YqJUuaC5OGxR09/8Xm/35+7MjNISBoUcOjg/u79lX0HkCqoGgpb2fka3dH8TFyaUt1u2bo9rfbISopupcujG4S7l6lOyA8jjH1Hcqat23bUQ0OrIEheAx/xSlabvI3YimsqlcEz233e3ja67Ymdq+m4lgHi3Sk5R1F46uQMlV6MLkSZ8o4nn9p416YVLl1LgpoeDd7rW/5X32tyD1izoRhT4Mmlpf7el1+7c8OGgahf2wK0DEY9jWJQS/QG1NwyFGnnzSTt+ttff2P8wYfG2rb9PwKST0TMGj5V8r6YqjePHE/oDBIdwmsbCknmoaH6jtHR4Xad59js7B/33rMpeiSVMcxLfZLpy7O8PMBE220k5jrA+0EJV+hvn/rXrv8tPq0gDWfnrpKVG0QGqm9JLk6lJ0dvhfQGqpXiHHK9IfsAw93I4KNJQmuRm/pNDIH6d1ZGKrffKUC55pg3JBLBpwqKuQ7DjpcELk0tNKxcNa7KDBX9vwxgGEOl8Zps9nMXYBgRGYXdG2cMbyjwzMVGu1DFaNFVnDLhxdxCOpuaKpqh4iOtrkxWFUOJQVTBbzfvlPkqerOHYIqmGO0P6JiLYqIBrP6NIdFdHg5P4fGYl2A7iEcPk64EdrOX16Sw/D8BBgAd8iES5BLqkgAAAABJRU5ErkJggg==","css":".postblock-cp {\n    text-align: center;\n    padding-top: 48px;\n}\n.postblock-cp small {\n    color: rgb(128,128,128);\n    font-size: small;\n}\n","title":"PostBlock","description":"Block the posts you don't like","developer":"new-xkit","version":"1.0.2","details":"This extension lets you blocks posts you don't like on your dashboard. When you block a post, it will be hidden completely, including reblogs of it.<br><br>Tip: hold down ALT to skip the blocking confirmation!","frame":"false","beta":"false","slow":"true"}